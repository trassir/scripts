# SNMP Trassir OS

## **Основные функции**

Мониторинг основных индикаторов здоровья через SNMP

> ВНИМАНИЕ! Только для Trassir OS

**Установка**

- Перейти в автоматизацию, нажать «Загрузить пример» и выбрать «Из файла», указав путь к скрипту.
- Снять галочку «Включить скрипт» и нажать сохранить.
- Выполнить настройку и нажать "Сохранить и запустить".

**Проверка работы:**

- По ssh заходим на Zabbix и с него проверяем работу службы/скрипта на TrassirOS. 

  snmpwalk -v2c -c dssl ip-address .1.3.6.1.4.1.3333.1.*

  где:

  \* - номер индикатора.
  1 db_ok
  2 archive_days
  3 disks_ok
  4 network_ok
  5 cameras
  6 scripts_ok
  7 cloud_ok
  8 cpu_usage

**Настройка Zabbix:**

- В Web интерфейсе Zabbix во вкладке host.

- создаем хост - create host.

- в разделе SNMP interfaces - add, где указываем ip-address регистратора TRASSIR, порт 161.

- сохраняем настройки.

- во вкладке hosts - item, где создаем итемы согласно настройкам:

  key: SNMP OID:
  Trassir.db_ok .1.3.6.1.4.1.3333.1.1
  Trassir.archive_days .1.3.6.1.4.1.3333.1.2
  Trassir.disks_ok .1.3.6.1.4.1.3333.1.3
  Trassir.network_ok .1.3.6.1.4.1.3333.1.4
  Trassir.cameras .1.3.6.1.4.1.3333.1.5
  Trassir.scripts_ok .1.3.6.1.4.1.3333.1.6
  Trassir.cloud_ok .1.3.6.1.4.1.3333.1.7
  Trassir.cpu_usage .1.3.6.1.4.1.3333.1.8

  Trassir.custom01 .1.3.6.1.4.1.3333.2.1 - этот и следующие по порядку индикаторы предназначены для пользовательских индикаторов.
  По-умолчанию они пустые. Данные в пользовательские индикаторы могут быть добавлены скриптами.

- в SNMP community указываем dssl и сохраняем настройки.
  После выполнения всех настроек Zabbix необходимо перезагрузить.
  Индикаторы здоровья в Zabbix смотрим во вкладке Monitoring - Overview (индикаторы отобразятся спустя время, согласно настроенному таймауту в настройках Item).