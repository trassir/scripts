# -*- coding: utf-8 -*-
"""
<parameters>
    <company>d.gavrilov</company>
    <title>screenshots_api</title>
    <version>1.0.1</version>
    <parameter>
        <id>DEBUG</id>
        <type>boolean</type>
        <name>Debug mode</name>
        <value>False</value>
    </parameter>

    <resources>
        <resource>helpers.py</resource>
        <resource>shot_saver.py</resource>
        <resource>exthttp/constant.py</resource>
        <resource>exthttp/utils.py</resource>
        <resource>exthttp/__init__.py</resource>
        <resource>exthttp/auth/login.py</resource>
        <resource>exthttp/auth/user.py</resource>
        <resource>exthttp/auth/__init__.py</resource>
        <resource>exthttp/core/app.py</resource>
        <resource>exthttp/core/handlers.py</resource>
        <resource>exthttp/core/module.py</resource>
        <resource>exthttp/core/__init__.py</resource>
        <resource>exthttp/http/request.py</resource>
        <resource>exthttp/http/response.py</resource>
        <resource>exthttp/http/__init__.py</resource>
    </resources>
</parameters>
"""

resources = {
    "helpers.py": """
        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
        4+p7S3Xl7WOZBz5QD1O1/EpNMZf/H+cMA4M=
    """,
    "shot_saver.py": """
        eNq1Gdlu5Ljx3YD/gRDQGGrSo7HnIQgMdLA5HCTIHW+yCAYLQZbY3RpLVK9I+Ygx/54qXiJF
        dtvjIP1g8ygW6z6otj8MoySDOD9r9VA8zWPZ9sxNmkqyYEHuR1Y1Ld+dn52fbcehJ9uJ13IY
        OkEMyMNYHYTZ/PvEJmY31GRNrvuDfDL79dB1rJbtwN1xXvWskdOhY3iFu3g/CIlTOT5dnZ8R
        +CkEe9Yd2OgO75gsu2G3Y+P5GXus2UGSP6id63EcRv8gQgEb3sE/qXOkEgGW8zM9Ihtvmea4
        UZb3cDXQXpawm10WF8WnzMIXDbuddjRbCWKgrshKZGtSlshhWeLInc81rzeykpMAZLMQaKYX
        4eTnTFT3QDMMM4b84EBMdc0EbmctL39CEWc/AjphUenj9LVnDSUN25KyGUo+yD0co++rcSfW
        5P37uwcc5UaUh0oI78ADoGG8HhpWHiq5p/jHgrZbsLgCGSMbkBaXmdnA36xV+8OjQD3+A1Ei
        SppNcvsLJNDCGA3Tf/IWAX6rwJSm18SsXXO3lkc3IO04GpmcRq7u8pgZJ15WotQWT7fcns+y
        7B8T13YPykOD0TCwgYcR5jvlBHhIzxEh4DsmRiUC4NZ5V/G9vlUCFJObLV8ThN/o4/rwxuDw
        UBRNxXogaUO+Hyfmb4A5jJJ6sIZnaSk2cyByFoEE7oeykVQ6SiWaVMvVktMrLP6SXLLLC58d
        UQpWI0+CfITNnwdbvdA7Hyzc+xmEdYKlEcUoLhbk23hVuAE6Ow5AAP2BamQ5+dkMiX8a1smK
        zuj7th4HABx4IzbqLr3nOUcjUTZS0EZa2RgaUDpKQoi9v8N/AKTu0R6d57nmF8mQhXeZwV93
        YJrkh2G8g1CztAnPDPUCuAGrJ4nBTFbiTuj4VpFde8+4WdK+PdunMvCy5a0sSypYt11rQN8g
        xQSRlWoq1gSB8sKd8SwJdwp9zUZjWewdMUq15+wyga98gLuRrQ35XQVG4ROPzqRI8gh+2Lcd
        c/EV9IB5reiHZuqYKO7Yk6DLGBDHHZUgwLW1w1lfAxJmNgtMBHx4qNrAo07RH3LuxS6VDK9e
        h8QIYQkKhgPKn5gvw9O8RWEoRVrirMlseh9CHzUW+DdI/8ZciU4uC4zbllddd5JPobltBs5o
        4AbzFbPhqwuHrYmXAkUgpj7ygFdYPZ96E+FD2/dtWtUtkcU/KH5x/7Px1PlQTrbDSJQJPo4V
        3zHq3/OjyxKHcQAfw2rIkme0Hdk24tM3Krv2CFgItd0auMB6EpI30Sq0TLMYuVvVNCXiM1LT
        DjJb0TKXgcx/1TSgATxD5ACKYp42Eso/TJLSwO8UztwnAh2urIceYqiyvqWMAPcPAKJkNYOh
        nYDxKRK0RkGAL9LzZWh5aIc3+0HeVFCxqWKCXlsn8OLxryvBZjjiQDwTnAumBVY63H6BSthi
        S5jqAYy+FO1/2ObyYk1q4Om2qu82fwGPiU0Xks0wSZM5Ly8W2331WMqxZWi9nxZ7WwiiOoRK
        ECEWts/1vuKcdap4+0ro6t/Fqi9WDVn9/sPqzx9WN8UKUsOXwy6LwrilEtC4IXrGXFlGR0rj
        JyXyC+eQvxjICSPFnr/pxjEOUY+McQEaEOV26BpV5Ef2kITCbqQQTGLWxdr6SUjWQ/kLhe+g
        VC6y/HPoc1mMyLvqVExwLEQWb9x1IZIZlV1RpGI3k0a5JvdVN8VWFEhZgbygqzlW0wWC/CX+
        lDemuYSQlritFco0FpHNSOTD5REh+SiMq/+kLn2RwGOR+Q3UaZN+mT5z5QnKYps6bSMxvEOO
        DWNbQ426Hxo/BtV7Vt/F7ZwOZqpHS7d9gYTA2bH7U91cK5p2jHDhL12xwLm+umNwSCwx488U
        Un+9UXEZuzEoQVL5rmohOhswmv2m4u8kQcQEMJN3z1/fXZHnr1kB2aOvpLppjajyuGmyjaKW
        WyTSyNuOaAnyqJqEed5EmEioBvYFscYYXyfYCPv/UbT6LifcV4XlVxprC0cwf7HHVkBvpsZa
        kyYjbi4Dadt9I+kmKXgLFMp+ljsC0AhVnvb9sN5alomGSuiLLyMdYjspOsYO9HKhpzdQc5Si
        YxVgWVbiidcl6oWGKoNiRBcI5XbqunI3tc2auDJiTXwtCJzuppGJuYTRvac6Z9psj1itY5dy
        nW2U959Kgwn5t0N8PEiA+la2lHlYES0FpXAZtVAsvLqqv22qK0c9dcRDk6ze2gr91JYvtKQ5
        od8gq1jNJkkszDzp2socVBnr4XQ35bNHLAvGEFvKcN4kE/3WmCca5lvIeHfeq174/vPWC1Uj
        OseX78L3PM+wVXavsLlIpfdUWl70IUGTArpnS/+Yp7Hy571Gqlp+7YcnZdQb5YzrRdhCLcYH
        jKaXG0G34K07sfkbwaukBTBvO3oMHqRUAg7UDL1a8/vjI1V/0BHM0MF7+aJmdu1RoeS6gqwB
        YsJ/VjZ6bOXhZkoIOHOc42RmdzXm2Tq87JRutH4WCzaQLVetMyfWlRcurrVRcBHunUHP62EC
        yspMFQAQySLSl7lHJeh/YQWvc3TshNn14wH6T0iBiMRiJNqldnCNl8Cj6xZOHSR1C2yck42g
        TWtREaJCHLpWUmAtwBHXLxpP3Il9fPZumCn2FjfeOI8/JvyRPfnfikIJXvP7dhx4z7j+oER1
        YIKa50bTsxJKJdth4k2Wk5XPb36KHyvvJUMJRYUsfjQnxcdnX9Iz6zGGWX6RQNaBujb+JMYT
        a/1/kuWxPIMVpZGOL14ycGsFK5El0sqK0JTtqVeMUwbb4uP+kQZOmo8O/lqDX27iDw98ePBj
        YiKrmQK+FS2HnMVr/EywjjGlMrCio5GJjWSl78h0X3QamZCYUdscJ46gekU4cdaqm4FDNcIJ
        y5F+n11BCQjk4vPg5G06vokVS3Yc/SophIRxJsTvyXH+lBNEHfXsD/YXVGIuvsMmnSc2v4XP
        Z/kiZFqPssZofO8I+ga/241b9QVprtwS6R4bJDe2lKR6fXvSVDVeb+93OSerH/cUvAzICnJu
        Er4xu35r2pTiVdn4bdn1LfWm/YKeeC/wgKPu8uVKHfD9Fw1WoWw=
    """,
    "exthttp/constant.py": """
        eNp1kM9KAzEQxu8L+w4hXrbSFryJ4GHRtRaqSP8IIhJWd22jbVI2KSIiqPEmQgURFRW1NxFR
        TyqoFx8g9Q1yqPgYZq2utWgumXwzv29m0gMSvQkwRz1MigOgxucT/aFiGqaBK1UacEBZFJYo
        42Em52QnnSwat8ccMPipJpnPubZgFoSxJHErPqABgENl7BMOIyJVSA//SRRr2NNVQ9n0RP63
        L3c5s2LJqhtoJ6vtHVVO2PlRXUmZzvNS0p1l4W19vxcoJhZC87jsIxRvlwUeDjrCWMw0MvZ4
        qmCnHNQxXFfbaVh2SbHmFn04E27WtQFbZtyvoCXs+YhWOaaEQc3gvn6CfsDw64adEbuQyaOO
        VXO66YppAH3glE8wYIsBrnIY/9IKJNzZA7m5X7ISDSXOlKgrcaXErhKHShyDT+lAiVMl9pU4
        UeJcBxEj9+T1a0Neg+a6fGiuyTv53NyIsu0GgNDaD3Asn+Rtc0ve/410zAs8ypZd9nLTBWvi
        H/jt6KK189iqb79vHr4dXYb6qml8AAfE8hQ=
    """,
    "exthttp/utils.py": """
        eNqVVl2L3DYUfR+Y/6AKSux0IkKeSmAelmRJAqUN3c3Tsgitfe3RVJYcSWZ2GvLfe2XLHtnr
        DY0fjCzde879kI4sm9ZYT4zbbuQwPDqjp4/ClFDgWmVNQ9yh81KRaak9V1JBXHxsFANvAcb1
        awUNaH+LU9GkFB68bCaL8XvXj3ZkGId3CcqL7WYK42CcD589DCuMdl5oP+L8cfXnhy9XH675
        p/c7cvPu70+fb/nnq9uP0f4AqgXrRusaPFemrsEGxO1mGJN9spDl2w3n3grtlPDSaFwtZeHH
        eR7yxjnjWCv8gR2N1FlCvCP023fmHWWVsY3wWRJhng+0sprcpQt42YScv91uCD4n6Q+xA8y0
        oC8WSGDpjoDGVanrPe189ep3mhPhSBW9w5OkwLFBGHLFLIgyy1nvC9noefGxxng0TNrHQhmd
        t8iULRATP+yKh8fgGhBYJXWZ0TiZ4mNJSONqIvXowqQHO9g34JyogeZJEkMi58VMeJwtkA7B
        IpsznS0gJbv465llkgbtG7ICzWM6OGR9mM+WLE2tOEhVhuTQbSXkGfZv8zJ7E4vcY6y0dy1Q
        zGwMFId9oE+NcLNNdkKXBAtwboESja3GUIOj8Mj9QDCDy9fdYHZPftkT2mksnXQHKJ90Zz0W
        /v+K9qRw6PoM/ozj54u3Bjc75ndjZ+6TDJ76gXLwTISDfrASHro6o7eJgoRSh6N3fkt+dXh2
        R6pFXPBYQOtX0CPysI6AGf2iD9hLBSWZJsnpEJRJGRFSn44/0Cg6JYSNkLmxgRZ8hydjVgSG
        Opg5DDDx4eFS4A6sFEr+iwKJgi1GENxc0slekgvoV3YkW9P2PN03kTqYowCaKJTTFge1Bjvd
        DStI2P4hLOZaJX1GGc3vXt//GDBcLOymsLL1H/vhNb8B77F4boWCuriWvfj2/UU+yXufRJDy
        /KfZ/no4QuHXuEy/ssZUd7KcmKJ5OKgxfc61aIDzpOWmb2CM4uXLf07C1stNECxY2TWti3bo
        KTrl98vmJwgXivA3wI9fobPnLFRiTzFzLwvc6SGaPT1+7cCeX71hb9hr1kjNjm7SkWGNB7/l
        rYofuB+LE15ZeOk1QndCISYFHd6roNOuXNyvCUtabw0n/oMAZtd6mB4SSo4tMoXDvWBbwC4l
        c/x7SqPaLWNJSFY0Z641gxvp/0yE6pUmkEiUB28GyVlHXyBHVOyvDmo6ww1pVqbTZdSwOdh/
        WrYY8g==
    """,
    "exthttp/__init__.py": """
        eNpLK8rPVdBLzi9KVcjMLcgvKlFILkpNLEmNTywo0FFwSixO9UjMS8lJLeLlAgBaRA83
    """,
    "exthttp/auth/login.py": """
        eNrtV21r20gQ/m7wf1gWCpIxsin9ZBDl2vOlLaEtTlMOkiDW0tjeer2r7q6aBKP/3llJK8uO
        neQ+HBxcBHZWM7PPMy+7MzHf5EpboqHf4/Xyh1GyfdHwswBjTb/XilbKWPe60GpD4M6urM2j
        VGmIVkxmArQhjeU7ZuBDLTswd1/e6gOuZ2ByJQ3MIOMaUjskn9ALL33AJY1l0nqAi+ns+3SW
        nF1+/LOxXIHIO34swSZCLZfOjX6vXpG4Iw5Cpzj/cvbxc3I5O0cddUxmMhoJlTLhQp5sTbZO
        HF6JwiWXNFoovWE26PcIPl4bO+PIgLVcLk1Ab2FuQP8CTcOrCrWyojf9XugpZ9ML/JxN//6K
        zJjHVG1yLiDQ9Hp0PYgG14PrER2ShWBLE6P+onK330sFM4acO2eaNAedlIeT2rEksbDJBbOQ
        JC6yyvlow9aKOhBnksECzbjkNkkCA2IxJHMEkmwDHqUKETWRVyCUX3YsCsx70PVoWO0KoxY+
        7JJiCRq+5qANyYDppcE/g/WtW3X5NdhCy9oNDTJDKtBa6SRVGcQUU1Rgqp1H1UuO2blVOsOX
        PdIcC/QPWOsjEmUwL5YBbXZEX79cfCPBKxNiHl4ZZLP3OVaso3UxO1+SpOWp5Tto725V9p1F
        5NJCvZJ2NvAFkcq2+zpeVsExyxBqS02RpmAMnZDxkNBdjlBAp5vc3rcItNxBgDCHiMjXuV0k
        xuOTCg7S0gPDZ9P/UdgV7ucps1xJwk0VEPvFuGBzAQTvFPmmsXJck/c1VblPdcTN+nDUzWKX
        SxNVlX5o6p72sg+P610w8XZXhEmbMgzJnyyUPqxbq0RDGpYn8LEh8MV9/BfDaI6YhA9FWAsf
        Y4T9zxamSqoryuvxeHKcxur7E5pOxVzHj4RimQkOG1JkinngLlNLbbENh+FxTLhLIbfkOxMF
        TF3Zn+Z+9LTskZb+Dh9JjAO7apFuHqFtesixoRPQkRltfVMr3TJda1iUbw3P4i1+lQc9/9Tj
        MeK9jjl8alPFFvsTdTZtDlSjcOeJY9O7o+ETSM7dJiM8c5PmlOGxOp64Xs8tGb3a6u7xLG8I
        Cqr6tcnTsS9suFdULCQ3vBruKQS7+ya4seGBT53W6ZdX45vnzgoXSZ3cjvMYyqVcS3UrSSXF
        PO8Gil/sjV73T8pj4/dfma6HpI9P2Jdh9zLsXoZdp2L/w2HX/S0VuN3/rbZ/yktsbBVg/GY8
        Ro9/A0R7HVk=
    """,
    "exthttp/auth/user.py": """
        eNqlVMGO0zAQvVfqPxgfkC2VAFdEEUiUJUIsaNuC0Kqy0mSSGiV2ZDuw0Yp/x46T1Clle9hc
        4rwZvzfjeTGvaqkMOkht5rP5LFeyQgcoa1AacR8rwLBSFgUol+FXaBnAhLrAdr26YevVZhNf
        X61t3FFGGozhotAEN9pS4i5zPkvLRGu0tRCR+5+QGvpqPkP2EUkFdi9+J6RoK9lo7PGi4ZnD
        +899ooEpXhyMtui4eOGjg6hFrqUAJ+jgDHLEGBfcMEY0lPmio12gVBbMrZYue6jEE5V51Eu7
        10kk0Jk0H6UZcen0mM/z6ZZAZKTre5/kdeCZ3OkBTLbc4iCId0P3QSVDvydFjOQjbzdCl+0R
        Mj0uOt0OpYaLjKfFh9V5M0UZ7Juimw8dom9rJa0jTXscJNdMNxZztvLJgbYC0ygRjs9ZKqu4
        wA9QHhLNfnH4PXT7H9a9lCUJu3rqz+kmvvq4WbNv8eo7vaBSyYzn7eN0Pn95H3/4cUnJmqKp
        HydkXb39+uAoUin+4b5geKPaM14J53a0s+PHu0jXJTcEP8f09tnL3Yn37lKoDSKfoF0pJdUC
        xSKDu25NzwjV9vqZXgsKatVfC2eOCL/u7qr78T99ov4s0P1osODTn6EF6Bsc5VJVielYl72j
        /wI4pJKr
    """,
    "exthttp/auth/__init__.py": """
        eNpLK8rPVdArLU4tUsjMLcgvKlEIBbJ5udLA4jn56Zl5MAkfEMcjMS8lJ7VIR8GrOD8PWYSX
        CwD/fBq0
    """,
    "exthttp/core/app.py": """
        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
    """,
    "exthttp/core/handlers.py": """
        eNrVWV9v2zYQfw+Q78ByKCq1rtwNfSjSuEXauWuBrQ0Sr9uQBYJi0TYXWdRIKklh+LvvKJIy
        RVFu0D7NDy3J+/F4vP9U6LpiXCImDg+oHkqezclVNr8+PDg8WHC2RuvsmiUFY9d1hQxoRtZV
        kUnya7Pq4sjdnFSSslJY7Equi5RwzngqzbaWNbmTKymrRP1j8dHhAYLfe1g6I6ICTmTUX/rI
        5ElRsFuSh4nvWF2GSL+X1yW7LadKngD5nPAbwoeoZySnnMwlkGLvBnOgy6yU9hbnb88+nM7S
        jye/TUfofHr2eXrWTLxttaRFqynJDXVFiorwdn1JZFqw5ZJwpTg9QhNnOYoV4c3J+TQ9PZm9
        BxoTSZXJVZJdCfV/ZOf/MFpGabqgBUnTkYZxuFR4GANffWPGKRHA96I95FIdaQ0qUsXdObc5
        p8WOEG6RGHjSRQskd1RIEXUZxUda987ZSVZVpMx9oFZI45oTzyujHo+JMzbWzckiqwupFCJB
        45MLnJM5ywkYZvECXxoULatapqQECi2XEwzEpy+wIbJa7qHaZR0BYoI5ARnnBGsfAl2INCc3
        WnVgUVLeRHj65+z9bHaaTj9+xqC7irMcx2gyQSDdDVa7Dg/mRSYEepMJ8j4r8wKcgF39A7ez
        ukvbaEtT4P6RlcQSVKCGqJouqSxIZweny5VU1sfYgkBvwIiWVKZpJEixsMeqn5onRVYu1RZS
        Yo9yBTKX2ZoYhh1azYvQ8pqUtfK+S289J1e1OuVdVgji0VIIjixv76lipEPn5N+aCOndXl+s
        u9O/H7ivOWGnRIfsSNDXtHZWZeku/w6zuMvsB3RLIboYBEA0FGB9HjHKBJIwPfK5qV9HMpBL
        AUElWR7FiQ6BCDcxEId2D17PhmAU2tU7dzSEul9Y9vftDdQ+fH/o9vH7grm/I3Z9Shlc0Lwf
        KzT3HN56l/FP37EavAtIfpnOlD9FGGgqXbgm40TWvFS7Og6e5XlqdCxSKF0S6lEj2giZmStj
        arEWChJsumLhJmvgo07d8yBZLVeMAwafJCfJjNdXtKClrzuwtJhz2vQQCtujq8QChDbJ+HSb
        XizGzn2caEp9aqBOifaBUsksub9s1G+PMdPeKWATg7AuEPdvDFnMopqJg9hawwUtkdRVrsLN
        Ws0FG9v39vQ8QWXXYeubpQusYPjSS8P39tb29l3EgnFEIR9A6O5SvcelOUdhJlDN5zJS4zgA
        WTQoHQu6ZuE4wMpgAZZJyaNOLNXgFaOGzYVlcTnS5SVGVOjRAE+rLFrWJCCdSLO5pDd+2RtQ
        ZKIbqomRBQLlGl8OXcZlTcVTPcFhJV7gFt4Ys50FRSqZDCpqpA5K4a0gBOW41RB0IsrmQ3I6
        V0FPQNbXgJ08FBg91BkqpE3H9WwPaOy/82IOq4QbF378OODEyjeaRitcp3udQqjYe9XO47RL
        jRoeTLG7MO0L0UZiGCT5l4BaTYy7j5QoLG5ilLRTj3eAfrnd7wznmRQF3nfQQ5jTYr8IWiNl
        fCmUra5v1cg1VeC43WMvwlDtcIdpxcT3cz39dG7Y2s76NFu270jbYTvd9kCbjZ8/e54ozePw
        vQOuyY04u7KuNddxQQtK4JEpa+VQOVHZ4adnzzyLhZHB57EL2c9kTYQAfXyFj0H1lG65uer9
        AJe826tXbh7bqXKwJmni4wc/f3o7++t02nxUeKWRx85Yz6GLfdW9z7FuKV71nXs8RrMVJHYN
        QCUhuWiKUpP9QXQwrcqsKmshyZC6Kp0DosjVc9xndy459IcJvNgkk18qkoAxxR+0eRsv6nKu
        uhoUiXqxoHcx2mzCidLoTYJgCVWK+rQwe0Z6sSDlEng+RXrVzGP0AFzi6Y8v+1y328BiMOHC
        i2jFwWcn8Ogoc3abFGyeKbETtZyIqqBQXl/j+OLZ5cswB1YQ2LWMNhu15ajhN0K2DztCjzZ2
        vH203cYvg5Unao6z6ovcPfGw5tTGB4M7x/djon7+5U2n30iFniA8buyCQ8JrfYdsgAhUyf2X
        G+8T7GtCDcvky3M87kXE8dgLnOMrln/xA6l6ZT+CKT9PkuNx1eHh7AGGKjLxnq8GO6/ovInq
        CpKCmyH0+zZO2s3+Y975pmCHHqKCzJRCO5MuVMpKV5ox4EOJfqBqtc3PnkJjmqZOG6fSidfW
        daT2Uri1r0p6m63xtASS0jrTkrQbY3+j+hoIKWPBoKTBSUfooVBitxZTKQwarlFHnlF7YuyX
        gcHuopOdrWxWrElXyE4/RYqmnO1Ob8JAfeCI8LjXr7uq0Hr4v9x4d1/Rt68jtA0nJSc0D7ij
        LPULN373ajc328Az6V7dptZF25j09REOp29oO92TvqtnCTH6xr6lsdtwOxxUyze0xJ7Tddsk
        lXk0C6PbqM0+zfJgEgq4sPtHjwhSyt8l2mzbjNLybf/0Yygp6ADEBXn/A22uiz4=
    """,
    "exthttp/core/module.py": """
        eNqNU8GK2zAQvRv8D8InCYxhb2Uhh9JL97DL0mZPpQjVlm21sWSkcdP+fWcU2VaSFuqDFM28
        mXl6ejHT7DwwF8qiLMzlMLoAdOy9m5j+BSPA3KgFRpYAb0H7m3TrbABlYYV8/vDp6fUoX98f
        P1Krsuh0z+SgQRqEclrkrGAUj2XB8DM922IplMLWEb2GEo0JvTnp++oNvibYYav57ozlGZ16
        Rwkilo363zFngxPcrLN71Kzy3yrBVGD9DZo+r2HxlvWN16rj4gJIwaraFWoxD1pOrluQwLCY
        rmZWTfrw4qyu2UnZIf3cJqdzO+r2h/RmGCHE0EqaylGOuDnPqGcDBrB9okFNERA3BNDrN/iW
        ELhAOby2wMWXitKLGnT1dQdpAGOHwKvwO4Ce5Nl0WroZDJqhwhrz8M7KvXBVG/B6ODD2OHoV
        gvHP+4XFDqIJkohzWm4T1JjTIvLGMRXF6RQo/jfLbfjoSayRuXh8QXeT7rTHudl7piejP8CG
        a90gifghsm9GFeRPo8+p3R23q1n5gXS9Y3N76cWfVpUumagiXFRMvpGq6zhViAxCLJO7nJfL
        jOrkBqtZ9MwV28w5V3Gqwjht/0Jv0cxca4+kIaXL4g8RZ2kf
    """,
    "exthttp/core/__init__.py": """
        eNpLK8rPVdBLLChQyMwtyC8qUUguSk0sSY0HivBypYElMxLzUnJSi4phKpwSi1M9IGK8XADw
        +RbI
    """,
    "exthttp/http/request.py": """
        eNqNU8FO3DAQvUfKPxifslLIB1SkaqWu4NKCSqh6s8xmkhhlYzOeSCDEv2M78W4I7Qqf7PF7
        b8ZvxmpvNBJ7sHpIkwb1no3YG4kWmJquwkE82jRJkznUaUv+GPDwRB2RKeRIXeTcWUAPSJNd
        L61lv+FxBEuZvn+AHW2+pAlzq4aGCaEGRUJkFvomZzgBc2bBWqWHnO10K9pR1eUvPUBk+uUJ
        hZgJrIxUnzRCCJ8XBL+Mq1zUkqQj+DcXvZa1zd5pFQfQ5kiGpx0YYn9kP8IWUeMJ4ejYJ2T/
        g/Aicb980ASfvXGgefcBMjr/3bVvQzZjQkzVR0PXVXQga0B7dDJGVjgjXZ/LOQ/2C7w7LStR
        zeFmD9TpmpVlGJ1i+7e6qqob8XNbXV3/EDfXt9XKzqAeWYx7BF80o7dwmnC59fhV5coKQjeO
        ynvDq2nLmRrWLy5aoIx7986/tzAQzxnnm6j3zaA2gPR8nGKXLjR7OZ8INOKw6rDE1p7Q8e/8
        nNCH8Zg+E4LB+TP9Q4JfxI/4svDrDF9z5rtavhwaHGJ+YuaY375uvvKi0biXFBKUIUuavAF4
        KEm+
    """,
    "exthttp/http/response.py": """
        eNqVVltv2jAUfkfiP1iWKkIVsqoFaWLioavaXbS1U7s9VSgyiQEXx85spxdV/PcdOwZCCIjl
        gcTn5uPvHH8HluVSGTSX2rRbrFwkMn9rt6ZKZvDJOU0Mk0Ijr03plBTcpCwBD29GX83cmDwq
        DONrQyPjJy2FNdJUPVOFRgi/a/UcCZLRJQrc96xg6bKLo6lUGTEBiEY2mUhTY5iY6QDjbrfd
        mlPCzRwi1JSlHHfdLoaYQscZ1ZrMqAbjSq4BJ9kkJUOE/4iFkC8ClebWteYYFXlKDA3e2y0E
        z/nZGXjdLXBYrvtu/Zmk6J7+Lag2G8UFKG6kmrA0pWIj7oP4Vhp0IwuRbsQDEP+kZi5TZLWX
        nMsXutYP3DbfhKFKEI4eSgivlZJqbXJ+VjnPWrV0aLRbCSdao69QmHuqcyghDRx616+mKgyR
        nDxBkbvDMqpHI5EpBQjh9KV4QjSNAe6UKgutB8c+uMwND1FZ53BH1bt7AG1Zq0csdQwyDU2F
        xw229sUS+oski4qTLqU5SGNOnylv9P2iyGRCVc13Vkr3+HauJIAsTO/3W047Q9Qx0M4f5ibj
        n1AyJwqabVSYae9jxzstLbj2A9oLxTETzMRxoCmfhggah4wwDpFHanQrBQ1X0Dp4wS7a7jiA
        s9aCj1UrW4lxLcCmEPa2RvbHZRBVy9TdOLHpKiPENLJJVVKyT6Wy6/PVd1tdjN3wzsqe3V46
        eO1rwHuaMgW9FlSFzY13cXZ+AGcuE2JpKUSnRM00vE4XL/ZrC+oipypo2j90GXejddR6lGYA
        HvEPvy8eQ4qrJPadFjjCU8QR5+3bi9YcZ00pR4W52BcGSMYx0FFR+geieKY6Ks7gQBEzR37N
        tfPNtCLIE40EcCTxHIlOvPOhYm8y3Sm3u6b2Z6vkzQcuqcWx6xEnHuwvoyfqoyOdb0X6DrN0
        zeNN3nvYKER2CsdpkeU6zokimSclv90IGL4KPDDFjsMezti1K9mjVkP/RyBY4b3j1m1mR49D
        ufpvAnXrcZXKGoeXmx7VCQBzA5M856y82x9strVBgMOa/2WSwL49G0ZJ3nNd17tTbMaEDXe6
        43BFkjld2VsTIXuJlVUtt3nYtXe1CQ419Wr6bJj6H6rhDi8=
    """,
    "exthttp/http/__init__.py": """
        eNp1z0EKwjAQBdB9TpGlgngHBYu4cBHxANb8QrCdiZOpvX6LRFyMznIefP7vhAe/FZTMVODT
        kFnUr5xf7qiaQ5WN+QTEJLirlf0tBjxHlB/WsLQpRpClM2vDI0UrF8gLchBhsXilB/FEf3QJ
        3fU9T6ixp8L03bR2Xd3/rvuZX9u7GSUQYaI=
    """,
}
t1utils.resources_check(script_path, resources)

GLOBALS = globals()
DEBUG = GLOBALS.get("DEBUG", False)

import helpers

helpers.set_script_name()
logger = helpers.init_logger("Screenshots_API", debug=DEBUG)

import host
import time
import os
from datetime import datetime
from exthttp.core import create_app, BaseHandler
from exthttp.http import HttpResponse, HttpResponseNotFound
from shot_saver import ShotSaver, status

app = create_app("screenshots")

check_work_state = {}


def callback(task_guid, state):
    check_work_state[task_guid] = state


ss = ShotSaver(callback=callback)


# GET https://localhost:8080/s/screenshots/get?server_guid=server_guid&channel_guid=channel_guid&dt=dt&figures=1


@app.route("get")
class ScreenshotHandler(BaseHandler):
    def get(self, request, *args, **kwargs):
        request_dict = request.GET
        dt = None
        channel_full_guid = "{}_{}".format(
            request_dict["channel_guid"], request_dict["server_guid"]
        )
        if request_dict.get("dt") != None:
            dt = datetime.strptime(request_dict["dt"], "%Y%m%d_%H%M%S")
        figures = request_dict.get("figures")
        file_name = request_dict.get("file_name")
        file_path = request_dict.get("file_path")
        try:
            task_guid, shot_path = ss.save(
                channel_full_guid, dt, figures, file_name, file_path
            )
            check_work_state[task_guid] = None
            logger.debug("New task: <b>%s</b><br>File: %s" % (task_guid, shot_path))
        except (ValueError, EnvironmentError) as err:
            host.error(str(err))
            return HttpResponse(str(err))

        while check_work_state[task_guid] not in (status.success, status.error):
            time.sleep(0.1)

        state = check_work_state.pop(task_guid)
        if state == status.success:
            logger.debug("status.success")
            host.timeout(1000, lambda: self.delete_file(shot_path))
            with open(r"{}".format(shot_path), "rb") as img:
                response = HttpResponse(img.read())
                response.headers["Content-Type"] = "image/jpeg"
                # response.headers["Content-Disposition"] = "attachment; filename='%s'" % os.path.basename(shot_path)
                return response
        else:
            return HttpResponse("Can't get shot")

    def delete_file(self, shot_file):
        try:
            os.remove(shot_file)
            logger.debug("remove file")
        except:
            logger.warning("exception:", exc_info=True)
