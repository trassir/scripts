# -*- coding: utf-8 -*-
# hls_api v1.0.1
"""
<parameters>
    <company>DSSL</company>
    <author>d.gavrilov</author>
    <title>hls_api</title>
    <version>1.0.1</version>
    <parameter>
        <name>User settings</name>
        <type>caption</type>
    </parameter>
    <parameter>
        <type>string</type>
        <id>USER</id>
        <name>User</name>
        <value></value>
    </parameter>
    <parameter>
        <type>string</type>
        <id>PASSWORD</id>
        <name>Password</name>
        <value></value>
    </parameter>
    <parameter>
        <id>DEBUG</id>
        <type>boolean</type>
        <name>Debug mode</name>
        <value>False</value>
    </parameter>

    <resources>
        <resource>helpers.py</resource>
        <resource>exthttp/constant.py</resource>
        <resource>exthttp/utils.py</resource>
        <resource>exthttp/__init__.py</resource>
        <resource>exthttp/auth/login.py</resource>
        <resource>exthttp/auth/user.py</resource>
        <resource>exthttp/auth/__init__.py</resource>
        <resource>exthttp/core/app.py</resource>
        <resource>exthttp/core/handlers.py</resource>
        <resource>exthttp/core/module.py</resource>
        <resource>exthttp/core/__init__.py</resource>
        <resource>exthttp/http/request.py</resource>
        <resource>exthttp/http/response.py</resource>
        <resource>exthttp/http/__init__.py</resource>
    </resources>
</parameters>
"""

resources = {
    "helpers.py": """
        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
    """,
    "exthttp/constant.py": """
        eNp1kM9KAzEQxu8L+w4hXrbSFryJ4GHRtRaqSP8IIhJWd22jbVI2KSIiqPEmQgURFRW1NxFR
        TyqoFx8g9Q1yqPgYZq2utWgumXwzv29m0gMSvQkwRz1MigOgxucT/aFiGqaBK1UacEBZFJYo
        42Em52QnnSwat8ccMPipJpnPubZgFoSxJHErPqABgENl7BMOIyJVSA//SRRr2NNVQ9n0RP63
        L3c5s2LJqhtoJ6vtHVVO2PlRXUmZzvNS0p1l4W19vxcoJhZC87jsIxRvlwUeDjrCWMw0MvZ4
        qmCnHNQxXFfbaVh2SbHmFn04E27WtQFbZtyvoCXs+YhWOaaEQc3gvn6CfsDw64adEbuQyaOO
        VXO66YppAH3glE8wYIsBrnIY/9IKJNzZA7m5X7ISDSXOlKgrcaXErhKHShyDT+lAiVMl9pU4
        UeJcBxEj9+T1a0Neg+a6fGiuyTv53NyIsu0GgNDaD3Asn+Rtc0ve/410zAs8ypZd9nLTBWvi
        H/jt6KK189iqb79vHr4dXYb6qml8AAfE8hQ=
    """,
    "exthttp/utils.py": """
        eNqVVU1r3DAQvS/sf1AFpXa6FT2WwB5CG5JAaUOzOYUgFHtsK7UlI8kkach/78iWvdpdpzQ+
        LJLmzXvzIc3KptXGEW2XCzks761W0ybTOWRoK4xuyGNTM3AGgATraQ0NKLfBowDJhQMnmwkx
        7lf9akWGtf/NoXZiuZiUKm2d3/Y0LNPKOqHcyPP95MfZ9cnZKb/4tiJXX39dXG745cnmPOAr
        qFswdkSX4HityxKMZ1wuhjVZR4YkXS44d0YoWwsntUJrLjM3nvNC1oBn2rJWuIrda6mSSHhF
        6PMLc5ayQptGuCSKME0HWVlM7tJ6vmRiTo+XC4Lfg3RVKDLTLagtAgUMXRFQaJWqXNPOFZ++
        0JQIS4rg7b8oBY4NwpALZkDkScp6X0hGz62P0dohMGof82W0zqBSsscY+WFXHDx6V8/ACqny
        hIbDmB9LQhpbEqlGFyYdmAHfgLWiBJpGSQyJPO2d+M+aDOWQLKhZ3ZkMYrGtv9pBRmnQviEz
        1Dykg0vWh/lqyeLUskrWuU8O3WZC3uH+uFtmp0ORe46Z9s4FipmNgeKyD/QQhJdtwgmVEyzA
        UwuUKGw1huodhUPtO4IZbHc3A+yWvFsT2iksnbQV5AfdmY+F/1/RDgqHrq/w72i8vXhzdDvP
        /GbszG2UwaEf1BZeiXCYHyyHu65M6CaaIL7U/uk9HZP3Ft/uKLUXFzxm0LoZ9sA82JEwodeq
        wl7WkJPpkDxUfjLVWvjUp+cPNAydHPxFSOzYQAOuw5exUwSGczCxGGDkw/3c5xaMFLX8gwMS
        B7YYSfBySSv7kZxBb1mRZG62p/G9CdIejgNQh0E5XXGo52in/4YZJmz/EBazbS1dQhlNbz7f
        /pvQ/7Gwq8zI1p33y1N+Bc5h8eyMBLXBlnx4fvmQTuO9T8KP8vTNaj/v7iFzc1q6t8wplZ3M
        J6UA9w81pM+5Eg1wHrVc9w0MURwd/X4Qpty/BB7B8q5pbcChp+hqt95vfsSwXPwFWbFrsA==
    """,
    "exthttp/__init__.py": """
        eNpLK8rPVdBLzi9KVcjMLcgvKlFILkpNLEmNTywo0FFwSixO9UjMS8lJLeLlAgBaRA83
    """,
    "exthttp/auth/login.py": """
        eNrtV21r40YQ/m7wf1gWUiRXyKb0k0GUu9bNXQl3h3M5CokRa2lsby3vqrurJMbov3dWb5bf
        lPRDy32IIfZqZvZ5ZmZHMxu+SaUyREG/x8vlX1qK5kHB3xloo/u9RrSS2tjHhZIbAs9mZUzq
        R1KBv2IiTkBpUlm+Zxo+lLIjc/tVW33A9RR0KoWGKcRcQWQ88gd6UUtPuIQ2TJga4HYy/TaZ
        htd3H3+rLFeQpC0/lmDCRC6X1o1+r1yRoCV2XKu4+Xz98VN4N71BHbVMejwcJjJiiQ15vNPx
        OrR4OQqXXFB/IdWGGaffI/iptYE19jUYw8VSO/QJ5hrUIyjq3heohRWd9XtuTTmd3OLf9eTP
        L8iMeYzkJuUJOIo+DB8G/uBh8DCkHlkkbKkD1N8W7vZ7UcK0JjfWmSrNTivl7rh0LAwNbNKE
        GQhDG1nhvL9ha0ktiDWJYYFmXHATho6GZOGROQIJtoEapQgRNX6tQKh62bLIMO9O2yOv2OX6
        DbzbJsUjqPiqQvPIgKmlxp/B+smu2vwKTKZE6YYCESMVKCVVGMkYAoopyjDV1qPiIcXsPEkV
        48MBaYoH9C9YyxLxY5hnS4dWO/wvn2+/EudKu5iHK41sZpviibW0NmbrSxg2PKX8JejrSQcy
        Ks8BW/Eet05DUU57Zt+mm9ZK2trAF0RI0+xrRV8kjRmGUDuqsygCremYjDxC97lHAZ1sUrNt
        EGi+h4BEHyMiX+utJQGWZZRwEIYeGb6a/l1mVrifR8xwKQjXRUDskfGEzRMg+K6Srworgivy
        a0mVH1KdcbMsurIJ7XOp/aKCTk3tp2ki3nm9DSbY7Q9h3KQMQ6orFqWn59Yo0ZC6+QV8bDR8
        sQ1+ZxjNGRP3VIRnUcfoY181mS6Sag/lp9FofJ7GqO0FTevE7CTxE8li7Rw3Ol9nc8e+pA21
        wfbuuucx4TmC1JBvLMlgYo/9Ze7OajkgzevecCYxFuy+QZp10M5ZtFbYXIL2K4mFkjq0Utlz
        49i0nqn7MsyP+Eb8onkc7PArb0aNlVQ+8ZjOOoBOvLAbPPJJCujYZd+SNWw98mhTTbg4wOEG
        iwuHiXbcjkwch/HDlQ6wj5Er4uyhOz0vuvy5a4FDh3q4q8dObpcFT340iy+7Ve4MDiaZ96pY
        gur3svG56r3QVOznVW3tfqfaL2U+IygoqrYJWQV1ObsHpYzlyzUvrkoROPsuk3Btjs+vNTDq
        5f1o9trJayMpe1TLeQzlTqyFfBKkkFK3NZ7rxcFFxl75ui4z/8ld5Zi0+77y/Vwd3kb824h/
        G/H/64ivmmD7P1PH7v6+2v4lL7GxFYDBz6MRevwPyVZy/Q==
    """,
    "exthttp/auth/user.py": """
        eNq1VV1v0zAUfa/U/2AsFTlSCPA6rQgkyqgQZVrbIVRVVprcpIYkjmxnWzTx37GTNHVCuj4M
        +lL7+t5z7ndYmnOh0J5LNR6NR5HgKdpDkoOQiNVvMSia8DgGYTTqE5paYuKYh/VydkOXs9Vq
        vrha6ncD6UlQimWxJLiQGhJXmuNRkPhSorUWEb77CYFyLsYjpH+Zn4K2xR8ynpUpLySu5XHB
        QiNvrjtfAhUs3iuppe3hTf16INWSBc/AEBpxCBGilGVMUUokJJFbwboo4DE1p6nRPnhSAyWR
        11Cbv96LxdMJ3gtCYtSdoz6LuiYWSQvXxN7Rq4QDut0EdEw22HrE20P0lieHeHtOtOAtblVC
        o11LSDddTtccEglnEfvO297VzeSFsCviqj5Ot3ICctFUzi6SAFWIDOHLqp0e21S+EL9d9NiW
        0LrW1FrgvMNexEXqqwp1OkCqu5wpSNuOMReb/UxhOzFhC65tUjIRzmYittjtVT731b7h62I2
        AXeLbvS2R72BYjSu3Psi0xYELzgyM9k6coEmsnGilwPZy8EvKF105ycF/JdM6DaZiBPpsKgH
        pqLNhlYzMJXiP0/K+1xwvR9VecwRk1QWWmZsTzWotUzMggtTluEnIPe+pHcM7g+zdwJ1x3lC
        7Bl7WU/tzfzq82pJb+ez784ZlpSHLCqfx/P128f5px/nmHRWi/x5RHrHrq+fLEXAs7+wz/Sm
        EuXA5hqcM2zw8daTecIUwa+xs3n1dtvbhA8B5AqRL1DOhODCRfMshIfq7AwQ5fpjOB79AW4q
        MGA=
    """,
    "exthttp/auth/__init__.py": """
        eNpLK8rPVdArLU4tUsjMLcgvKlEIBbJ5udLA4jn56Zl5MAkfEMcjMS8lJ7VIR8GrOD8PWYSX
        CwD/fBq0
    """,
    "exthttp/core/app.py": """
        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
    """,
    "exthttp/core/handlers.py": """
        eNrVGV1v3Ljx3YD/g8IiiHS30bptHg6ONwdfbtNc0SaGvXdt4RqCLHF3GWsllaRsB4v9750R
        SS1FUWs399QFEkuc4cxwvodim7riMqjE8RFTj5KnGb1Ns7vjo+OjJa82wSa9q+Kiqu6aOtBI
        C7qpi1TSv7WrNh59zGgtWVUKg7uWmyKhnFc8kXpbR5o+yrWUdYz/Gfzw+CiA30dYuqSiBkp0
        Mlz6VMnzoqgeaO4Hfqia0gf6tbwrq4dyjvJ4wFeU31NuQ/8qqtKSI3Ikz2BdpqU00l+9v/zl
        YpF8Ov/7fBJczS9/m1+2L862RrKi05DkGrqmRU15t76iMimq1YpyVJh6CmbWchgh4Kfzq3ly
        cb74CLBKxHUq13F6K/BvaN6/VKwMk2TJCpokE4XGc8b9jxHQhT80kxVnVADd647JDbI0hhQJ
        Urf4tnw63ElAOkwCNNmyQ6SPTEgR9glFp0rnFu84rWta5i6iUkjrkjPHG8MBjZn1rK2a02Xa
        FBIVIkHjs2uS06zKKRhm+QO50VisrBuZ0BIgrFzNCABf/0A0sGrkAahZVp4vZoRTkDGjRPkQ
        6EIkOb1XqgOL0vI+JPN/Lj4uFhfJ/NNvBHRX8yonUTCbBSDdPcFdx0dZkQoR/JQK+jEt8wKc
        oLr9Aqczuku6KEsSoP6pKqkBYID6oAoumSxobwdnq7VE6xNikEBvQIiVTCZJKGixNGzxh+9x
        kZYr3EJL4kBuQeYy3VBNsAdreOFb3tCyQe+7cdZzetsglw9pIagDSyA40rw7J8ZID87pfxoq
        ZO+kHTDFnAIuJsRDxfMkW8Np6AijL0CHf3W0qBTUl8DVE4SBlnRvDAtsnWRoMeX06DF9+j1i
        UZ/YH4IHBlFaQSCFY4E6pBEFqQgkvJ661PDXkwzkQkRQbZqHUaxCKSRtLEW+3aPHM6Ec+nYN
        +E7GsJ4X3sN9BwN+iH44BQzxDyWF4Y7I9ik0uGD5MOZY7gSO8S7t565jtfg2QvyX+QL9KSQA
        w7Rjm4xT2fASd/UcPM3zROtYJFACJdS1VrRJoN9sGRODa1BBgm1fLNJmH3Laq58OStrIdcUB
        h5zH5/GCN7esYKWrO7C0yDhrexDEHcAxQQGgS1Yu3KQpg2PeXTzRtgqJRrVKvYsoUWbJ3WWt
        fsNGvw64gE00hnGBaHhiyIYGq30ZqM6X1swOL9CloJKd2aLeLJydcQ+vveOmzjGojW/YyNrD
        BnsG/oa1YNzH9NI1QTRy4xSNZ8dEp+M+xrLiAYOsAwliX5gcKi0fxJlB75HJEJ8jD8qyxVIR
        pyosiTykNC6gpVLysBexDfjepCVzbUjcTFSNigIm1NMITaMsVjbUI51I0kyye7dIjygyVu3f
        TMsC4XhHbsYOY5Nm4rV6IX4lXpMOvTVm9+YVqaykV1ETZJTARCME46TTEPRNaPMxOa2jBN+D
        rD8C7uylIMFLlQd92rRcz3Ss2v57L+awSrl24e++8zgx+kbbFvq7gUFf42spnJrqUNonYIXu
        TeT7MB0K0UWiH0nyrx616hi3B63QL26slbRXj8NAzZfP42ENc6FnCoVORXOL3FJrjJTylUBb
        3T3gk20qD7v9SBoSqKmkR7SuxO+nevH5SpM1c8BFuuqmXTMPWLPByFBA3py8iVHzxH9uj2ty
        Lc6+eVCa67mgQYphJJYNOlROMTv86eTEsZgf0zvE2yiHiWyoEOnqKToaa6B0Q81W7y9wyMeD
        euVUDZcJOlibNMnZi58/v1/862LeXn28U5hn1rN6h175Xf88Z6pxeTd07uk0WKwhsSuEoKQ0
        F21RarM/iA6mxcyKWSuQVYBHZRlgFDleHrjkriSHLjSG+VJW8mtNYzCm+AdrJ/llU2bYOwWh
        aJZL9hgF260/UWq9SRAsZqioz0u9Z6IWC1qugObrQK3q9yh4AS7x+o9vh1R3O8+iN+HC/Lbm
        4LMzGG3KvHqIiypLUewYl2NRFwzK648kuj65eeunUBUUdq3C7Ra3nLb0JoHp9k6DV1vzvHu1
        20VvvZUnbNkZ9YX2nmhcc7jxxejO6fOI4M89vJ4nWqmC7wMybe2yhbK1I74TKKX7DBFQKJWH
        Tzg9JN1Tkj0hmCvU2XQQG2dTJ4TObqv8qxtS9btLHaHo8XF8Nq17NKw9QBBjlBy47dj7R28G
        a2pID3auUPN0FHeb3UsI6y7EPDoYNeSoBBqbZInJK1krwoDvS/kj9atrgw6UHNX8PmcWxB5j
        0DXp+dPtkXq7sD3rNYyYuJwGsqcVh4dxImS03SmfJjGkv02qTtptjNyNeEsKyWlZQfEETqfB
        S4Fq6TwCkyWIPenJM+k4Rm7BGe1jenXAyGbEmvUHSVTRDP5FvRaOFm0F3YvRBh3e3IRkOhgR
        bJ0ohfzfHX1/cDG0uCW9CWAUGBoX0tMa/vxN57Na3e3OM6I9q9NVSumaoqFi/AH8DS2vzel3
        9Us+Qt/YM7V2G2/FvWr5hnbc8b5+i4a5TpHQug27fNcuj6Y9jy/bn4VCSDL/LoPtrssxHd3u
        45iGJKADENdpydVFyvv2HmWkefzf6svTFaOtQF7OvlLkHUueUyzw4sGqFvi6B/aC9qXAsMSQ
        1Xfo5n4JEg5u690xCohJz52gaLIMHI+cqsHdvZJqjdxe8fXuoTqd9CLlzcmfezUJZYhXzaCe
        adA1ydJSX4V1V2Peqw0DtNSCY5qqot3OCGveyIUKE6z9hgjdkcGHNMyEHLsWsliaR2hz3Zjx
        mUQdKD9gDNvS13v5byxe3oAHC153BkPsBffdL/WNAnOhk1L891aGvrI4Uie/oifCidapgP7C
        fKrC0YfifPSwPyK0JK2x+xEzqqG0fCWf9lmPoB4hP1T8luV5+ylsMG/aH5ZDtXmi9TOz1ARM
        /wshIRK7
    """,
    "exthttp/core/module.py": """
        eNqNVFur1DAQfl/Y/xAKCy0uxfMmwj6IKPqgHI7r00FCbNM22jYlmbp7/r0zadqmF9DCJpuZ
        b+4X1XTaANP2eDge1PCotAV6FkY3TN6hAuhS0UPFPOC7lWbFznRrQbQwQr69f/r8eOWP766f
        SJXNjOqAXZzuFJFg4yTthJEtxAkhjodcFoyXErhCZTEdvBNQJW+PB4afKthE8yRPbjUFkBIj
        VbZQtdxKT/CRgb6MMr+0auPA4fOMcq4Fpv7XzE2hBd3JII4zi8zPKGHCsmKFps9I6E3LitRI
        kVNKAmIUzRnKkA+SNzrv0YGyV/mZtaKRl6+6lWdWi7b0fyfL/p1VMvvNjSorsJ4k6lrfeNPX
        oLpaXj6K2pJgfr+8DtK+RDFl2dX0MoiB7GM+hyI/R/SMfgxsiRq3SHdpw8j9FBRgJD5i8h8B
        7kLAqJLevShRLVGHJpIAqi1tHNkXC7LhN5VLrjtQ2IpR8hyphzctnwXHSlIf5ffAJ3KCo83o
        ZE82Yifms4qoZDeIUYDugUrxcB/XQAEs0NjuVyOsVebLXDKezCgKhJNg7LSsORRATMfUihPL
        FTgXIOK9sZnwbq5QhocNEPc4wxQl3WQ47GDfdjTmEy7TJSfXL4P/aSUs/6PkzevbOLcwFj6o
        gBt31lH3pp4S5VnmJfDQ5RWGvPpZ4CLPY1IwFu2eSVw5T30LqpEfjEG7OHvSmOX2+Gd3BxlZ
        Dt92iF3jbMluPunY4bmBpWOHN0/wvEW2qMVch48d7Grgl889D3AV4O/Vw5KVBL0ilJWU1YHk
        CkO94lOlDe877FHf98OuOjNaP8uGDjYDD8gk5UctJAdrIqCuSnlZhTva88UkkePhL7HDFIA=
    """,
    "exthttp/core/__init__.py": """
        eNpLK8rPVdBLLChQyMwtyC8qUUguSk0sSY0HivBypYElMxLzUnJSi4phKpwSi1M9IGK8XADw
        +RbI
    """,
    "exthttp/http/request.py": """
        eNqNU01vnDAQvSPxH1yfWInwA6pStVJXyaVN1NKqN8tdBnDKYmc8SFlF+e+1vbA4dLOKT+Px
        e/P1xmpvNBK7t3pIkwb1no3YG4kWmDo+hYt4sGmSJpOr05b8NeDhkToiU8iRupnz0wJ6QJrs
        emkt+w4PI1jK9J972NHmfZowd2pomBBqUCREZqFvcoZHYM4sWKv0kLOdbkU7qrr8pgeYmf54
        QiEmAitnqk86QwgPEcEf4yoXtSTpCL7noteyttmLWMUJtFnI8LgDQ+yX7EfYImq8EHie2BvC
        voLwQWZ7ATca2V84MDW8xlsV9RIlsbUOajIXI2dhnPGwjuBp7q6AyfoPMjpt3bOXOJswwafq
        Rax1hx3IGtAuKs2eFc5It0PllAf7CO9ucSWqOb3sgTpds7IMa1lsf1c3VXUnvm6rm9sv4u72
        R3VuKjOLcY/gkdC9hcuE663HrypXVhC6VVd+Nrw6mtxLteq4aIEy7qd39bmFgXjOOD8J8cmg
        NoB0WH6ISxcWKd59BBpxOKPvhTi+z7cFilYv/qgIBqePeiYE/zB/8qdoXu/wOWde1fLpJHDw
        +Y2ZfN583nzkhdvvvaSQoAxZ0uQfb5ZlqA==
    """,
    "exthttp/http/response.py": """
        eNqVVltv2jAUfkfiP1iWKkIVsqoFaWLioavaXbS1U7s9VSgyiQEXx85spxdV/PcdOwZCCIjl
        gcTn5uPvHH8HluVSGTSX2rRbrFwkMn9rt6ZKZvDJOU0Mk0Ijr03plBTcpCwBD29GX83cmDwq
        DONrQyPjJy2FNdJUPVOFRgi/a/UcCZLRJQrc96xg6bKLo6lUGTEBiEY2mUhTY5iY6QDjbrfd
        mlPCzRwi1JSlHHfdLoaYQscZ1ZrMqAbjSq4BJ9kkJUOE/4iFkC8ClebWteYYFXlKDA3e2y0E
        z/nZGXjdLXBYrvtu/Zmk6J7+Lag2G8UFKG6kmrA0pWIj7oP4Vhp0IwuRbsQDEP+kZi5TZLWX
        nMsXutYP3DbfhKFKEI4eSgivlZJqbXJ+VjnPWrV0aLRbCSdao69QmHuqcyghDRx616+mKgyR
        nDxBkbvDMqpHI5EpBQjh9KV4QjSNAe6UKgutB8c+uMwND1FZ53BH1bt7AG1Zq0csdQwyDU2F
        xw229sUS+oski4qTLqU5SGNOnylv9P2iyGRCVc13Vkr3+HauJIAsTO/3W047Q9Qx0M4f5ibj
        n1AyJwqabVSYae9jxzstLbj2A9oLxTETzMRxoCmfhggah4wwDpFHanQrBQ1X0Dp4wS7a7jiA
        s9aCj1UrW4lxLcCmEPa2RvbHZRBVy9TdOLHpKiPENLJJVVKyT6Wy6/PVd1tdjN3wzsqe3V46
        eO1rwHuaMgW9FlSFzY13cXZ+AGcuE2JpKUSnRM00vE4XL/ZrC+oipypo2j90GXejddR6lGYA
        HvEPvy8eQ4qrJPadFjjCU8QR5+3bi9YcZ00pR4W52BcGSMYx0FFR+geieKY6Ks7gQBEzR37N
        tfPNtCLIE40EcCTxHIlOvPOhYm8y3Sm3u6b2Z6vkzQcuqcWx6xEnHuwvoyfqoyOdb0X6DrN0
        zeNN3nvYKER2CsdpkeU6zokimSclv90IGL4KPDDFjsMezti1K9mjVkP/RyBY4b3j1m1mR49D
        ufpvAnXrcZXKGoeXmx7VCQBzA5M856y82x9strVBgMOa/2WSwL49G0ZJ3nNd17tTbMaEDXe6
        43BFkjld2VsTIXuJlVUtt3nYtXe1CQ419Wr6bJj6H6rhDi8=
    """,
    "exthttp/http/__init__.py": """
        eNp1z0EKwjAQBdB9TpGlgngHBYu4cBHxANb8QrCdiZOpvX6LRFyMznIefP7vhAe/FZTMVODT
        kFnUr5xf7qiaQ5WN+QTEJLirlf0tBjxHlB/WsLQpRpClM2vDI0UrF8gLchBhsXilB/FEf3QJ
        3fU9T6ixp8L03bR2Xd3/rvuZX9u7GSUQYaI=
    """,
}
t1utils.resources_check(script_path, resources)

GLOBALS = globals()
USER = GLOBALS.get("USER", "")
PASSWORD = GLOBALS.get("PASSWORD", "")
DEBUG = GLOBALS.get("DEBUG", False)

APP_NAME = "hls_api"

import host

import helpers

helpers.set_script_name()
logger = helpers.init_logger(APP_NAME, debug=DEBUG)

import re
import json
import datetime
import requests
from __builtin__ import object
from exthttp.core import create_app, BaseHandler
from exthttp import http

app = create_app(APP_NAME)

assert USER, "User is requirement parameter"
assert PASSWORD, "Password is requirement parameter"

login_res_regexp = re.compile(r"\/\*.*\*\/", flags=re.S)

http_port = host.settings("webserver")["http_port"]
BASE_URL = "https://127.0.0.1:{port}".format(port=http_port)

session = requests.Session()
session.verify = False


def check_user(user_name):
    for sett in host.settings("users").ls():
        if sett.type == "User" and sett.name == user_name:
            logger.debug("Found user with name %s", user_name)
            return True


user = check_user(USER)
if not user:
    raise ValueError("Not found user -> %s" % USER)


def get_error_message(required_parameter):
    return (
        "Not found requirements parameters {param}! Example request "
        "https://server_ip:port/s/hls_api/get_video?&channel=channel&stream=main".format(
            param=required_parameter
        )
    )


def push_request(request_url, get_token=False):
    response = session.get(request_url)
    try:
        if get_token:
            data = json.loads(response.text)
        else:
            data = json.loads(login_res_regexp.sub("", response.text))
    except ValueError:
        data = {"success": 0, "error_code": response.text}

    if data.get("success"):
        if get_token:
            return data.get("token")
        else:
            return data.get("sid")
    else:
        raise ValueError("Connections ERROR %s" % data.get("error_code"))


class Sid(object):
    start = datetime.datetime(year=2000, month=1, day=1)

    def __init__(self, login, password, base_url):
        self.time_out = self.start
        self.url = base_url + "/login?username=%s&password=%s" % (login, password,)
        self.live_sid = datetime.timedelta(minutes=4)
        self.sid = None

    def __call__(self, *args, **kwargs):
        if datetime.datetime.now() - self.time_out > self.live_sid:
            self.sid = push_request(self.url)
            self.time_out = datetime.datetime.now()
            return self.sid
        else:
            self.time_out = datetime.datetime.now()
            return self.sid

    def __str__(self):
        return self.__call__()


sid = Sid(USER, PASSWORD, BASE_URL)


@app.route("get_video")
class HlsVideoHandler(BaseHandler):
    def get(self, request, *args, **kwargs):
        _host = request.headers.get("Host")
        hw = request.GET.get("hw", "")
        channel = request.GET.get("channel")
        if not channel:
            return http.HttpResponseBadRequest(get_error_message("channel"))
        stream = request.GET.get("stream")
        if not stream:
            return http.HttpResponseBadRequest(get_error_message("stream"))
        if hw:
            hw = "&hw=" + hw
        token_url = "{host}/get_video?channel={channel}&container=hls&stream={stream}{hw}&sid={sid}".format(
            host=BASE_URL, channel=channel, stream=stream, hw=hw, sid=sid
        )
        logger.debug(token_url)
        token = push_request(token_url, get_token=True)
        hls = "https://{host}/hls/{token}/master.m3u8".format(host=_host, token=token)
        data = {"hls": hls, "sid": str(sid), "token": token}
        logger.debug(data)
        return http.JsonResponse(data)
